"use strict";(self.webpackChunkreact_homework_template=self.webpackChunkreact_homework_template||[]).push([[11],{1023:function(e,r,c){c.d(r,{Z:function(){return _}});var t="BasicModalWindow_backdrop__zF1Qa",s="BasicModalWindow_modalWrapper__z8HT4",n=c(4164),o=c(2791),a="CloseButton_button__1uWD8",d="CloseButton_iconClose__6Mb78",i=c(182),l=c(3329),u=function(e){var r=e.handleCloseModal;return(0,l.jsx)("button",{className:a,type:"button",onClick:r,children:(0,l.jsx)(i.Z,{className:d,iconId:"Close"})})},m=document.querySelector("#modal-root"),_=function(e){var r=e.children,c=e.handleModalToggle;(0,o.useEffect)((function(){var e=function(e){"Escape"===e.code&&c()};return window.addEventListener("keydown",e),function(){window.removeEventListener("keydown",e)}}),[c]);return(0,n.createPortal)((0,l.jsx)("div",{className:t,onClick:function(e){e.currentTarget===e.target&&c()},children:(0,l.jsxs)("div",{className:s,children:[(0,l.jsx)(u,{handleCloseModal:c}),r]})}),m)}},4112:function(e,r,c){c.d(r,{Z:function(){return n}});var t="TitlePage_title__zyjBQ",s=c(3329);function n(e){var r=e.title;return(0,s.jsx)("h1",{className:t,children:r})}},1301:function(e,r,c){var t=c(9434),s=c(3027);r.Z=function(){return{diaryProducts:(0,t.v9)(s.P3),diaryExercises:(0,t.v9)(s.KR),diaryIsLoading:(0,t.v9)(s.$x),diaryError:(0,t.v9)(s.QN)}}},1627:function(e,r,c){c.r(r),c.d(r,{default:function(){return xe}});var t=c(4112),s=c(1413),n=c(3433),o=c(9439),a=c(9434),d=c(2791),i=c(1087),l=c(5294),u=c(1617),m=function(e){return e.products.items},_=function(e){return e.products.category},x=function(e){return e.products.filters},h=function(e){return e.products.isLoading},p=function(e){return e.products.error},g=function(e){return e.products.getMore},f=function(){var e=(0,a.v9)(m),r=(0,a.v9)(_);return{products:e,filters:(0,a.v9)(x),productsIsLoading:(0,a.v9)(h),productsError:(0,a.v9)(p),productsGetMore:(0,a.v9)(g),category:r}},v=c(182),j=c(1220),N=c(7834),C=c(1023),P=c(1301),Z="AddProductForm_container__YBAvA",y="AddProductForm_inputContainer__1uqyJ",S="AddProductForm_inputProduct__K1YMm",F="AddProductForm_inputGrams__kcPoQ",b="AddProductForm_text__QjxaI",A="AddProductForm_textCalories__60oO9",E="AddProductForm_buttonWrapper__xC1d5",I="AddProductForm_button__Alzd8",w="AddProductForm_button2__Ipdcp",k=c(0),T=c(7120),M=c(3329),R=function(e){var r=e.product,c=e.handleModalProduct,t=e.handleModalSuccess,s=e.handleSelectedProduct,n=(0,d.useState)(""),i=(0,o.Z)(n,2),l=i[0],u=i[1],m=(0,a.I0)(),_=(0,P.Z)().diaryError,x=Math.round(l*r.calories/100),h=new Date,p={date:(0,k.Z)(h),product:r._id,amount:l,calories:x};return(0,M.jsx)("div",{className:Z,children:(0,M.jsxs)("form",{children:[(0,M.jsxs)("div",{className:y,children:[(0,M.jsx)("label",{htmlFor:"title",children:(0,M.jsx)("input",{className:S,id:"title",type:"text",value:r.title,disabled:!0})}),(0,M.jsx)("input",{className:F,id:"grams",type:"text",value:l,placeholder:"grams",onChange:function(e){return u(e.target.value)}}),(0,M.jsx)("label",{htmlFor:"grams"})]}),(0,M.jsxs)("p",{className:b,children:["Calories: ",(0,M.jsx)("span",{className:A,children:x})]}),(0,M.jsxs)("div",{className:E,children:[(0,M.jsx)("button",{className:I,disabled:!(l>0),type:"submit",onClick:function(){m((0,T.Re)(p)),_?console.log("Server error. Try again later"):(c(),t(),s(p))},children:"Add to diary"}),(0,M.jsx)("button",{className:w,type:"button",onClick:c,children:"Cancel"})]})]})})},L="AddProductSuccess_container__AkagA",B="AddProductSuccess_image__ohi8Y",W="AddProductSuccess_title__omYwl",Q="AddProductSuccess_text__UEw+f",D="AddProductSuccess_textCalories__41fIg",K="AddProductSuccess_button__GQJKQ",O="AddProductSuccess_linkWrapper__DJv+W",z="AddProductSuccess_link__O+rV3",q="AddProductSuccess_iconArrow__WMwhk",G=c.p+"static/media/foodIcon.2edbd1522a105924ee3e.png",V=c(2041),Y=function(e){var r=e.handleModalSuccess,c=e.selectedProduct;return(0,M.jsxs)("div",{className:L,children:[(0,M.jsx)("img",{className:B,src:G,alt:"Avocado icon"}),(0,M.jsx)("strong",{className:W,children:"Well done"}),(0,M.jsxs)("p",{className:Q,children:["Calories:"," ",(0,M.jsx)("span",{className:D,children:c.calories})]}),(0,M.jsx)("button",{className:K,type:"button",onClick:r,children:"Next product"}),(0,M.jsxs)("div",{className:O,children:[(0,M.jsx)(i.OL,{to:V.zw,className:z,onClick:r,children:"To the diary"}),(0,M.jsx)(v.Z,{className:q,iconId:"Arrow"})]})]})},H=(0,d.forwardRef)((function(e,r){var c=e.product,t=(0,N.Z)().user.profileSettings.blood,s=(0,d.useState)(!1),n=(0,o.Z)(s,2),a=n[0],i=n[1],l=(0,d.useState)(!1),u=(0,o.Z)(l,2),m=u[0],_=u[1],x=(0,d.useState)(""),h=(0,o.Z)(x,2),p=h[0],g=h[1],f=function(){i((function(e){return!e})),document.body.classList.toggle("body-scroll-lock")},P=function(){_((function(e){return!e})),document.body.classList.toggle("body-scroll-lock")};return(0,M.jsxs)("div",{className:j.Z.exerciseWrapper,ref:r,children:[(0,M.jsxs)("div",{className:j.Z.productsCardTopPart,children:[(0,M.jsx)("p",{className:j.Z.exerciseCardTopDiet,children:"diet"}),c.groupBloodNotAllowed[t]?(0,M.jsxs)("div",{className:j.Z.productRecommended,children:[(0,M.jsx)("p",{className:j.Z.productRecommendedTrue}),(0,M.jsx)("p",{children:"Recommended"})]}):(0,M.jsxs)("div",{className:j.Z.productRecommended,children:[(0,M.jsx)("p",{className:j.Z.productRecommendedFalse}),(0,M.jsx)("p",{children:"Not recommended"})]}),(0,M.jsxs)("button",{className:j.Z.exerciseArrow,onClick:f,children:["Add",(0,M.jsx)(v.Z,{className:j.Z.exerciseArrowSvg,iconId:"Arrow"})]}),a&&(0,M.jsx)(C.Z,{handleModalToggle:f,children:(0,M.jsx)(R,{handleModalSuccess:P,handleModalProduct:f,product:c,handleSelectedProduct:function(e){g(e)}})}),m&&(0,M.jsx)(C.Z,{handleModalToggle:P,children:(0,M.jsx)(Y,{handleModalSuccess:P,selectedProduct:p})})]}),(0,M.jsxs)("div",{className:j.Z.exerciseName,children:[(0,M.jsx)(v.Z,{className:j.Z.exerciseManSvg,iconId:"Runner"}),(0,M.jsx)("h3",{className:j.Z.exerciseNameText,children:c.title})]}),(0,M.jsxs)("ul",{className:j.Z.exerciseCardLowPart,children:[(0,M.jsxs)("li",{children:["Calories:",(0,M.jsx)("span",{children:c.calories})]}),(0,M.jsxs)("li",{className:j.Z.productCategory,children:["Category:",(0,M.jsx)("span",{className:j.Z.exerciseCardItem,children:c.category})]}),(0,M.jsxs)("li",{children:["Weight:",(0,M.jsx)("span",{className:j.Z.exerciseCardItem,children:c.weight})]})]})]})})),U=c(9971),J=c(4152),X=c(2232),$=function(){var e=(0,a.I0)(),r=(0,i.lr)(),c=(0,o.Z)(r,1)[0],t=f(),m=t.products,_=t.filters,x=t.productsIsLoading,h=t.productsGetMore,p=(0,d.useRef)(),g=(0,d.useMemo)((function(){return Object.fromEntries((0,n.Z)(c))}),[c]),v=Object.keys(g).length>0&&(g.search!==_.search||g.category!==_.category||g.recommended!==_.recommended),j=(0,d.useCallback)((function(r){x||(p.current&&p.current.disconnect(),p.current=new IntersectionObserver((function(r){if(r[0].isIntersecting&&h){var c=_.page+1;e((0,J.rr)({page:c}))}})),r&&p.current.observe(r))}),[x,h,e,_.page]);return(0,d.useEffect)((function(){var r=l.Z.CancelToken.source(),c=r.token,t=_;return v&&e((0,J.rr)((0,s.Z)({},g))),e((0,u.t)({filterParams:t,cancelToken:c})),function(){return r.cancel()}}),[e,_,g,v]),(0,d.useEffect)((function(){return function(){e((0,J.U7)()),e((0,J.rr)({page:1}))}}),[e]),(0,M.jsxs)(M.Fragment,{children:[x&&1===_.page&&(0,M.jsx)(X.Z,{}),(0,M.jsx)("div",{className:U.Z.cardContainer,children:m.map((function(e,r){return m.length===r+1?(0,M.jsx)(H,{ref:j,product:e},e._id):(0,M.jsx)(H,{product:e},e._id)}))})]})},ee=c(4942),re=c(9334),ce="ProductsFilter_prodFilterForm__RotTv",te="ProductsFilter_prodFilterSearchBox__lproc",se="ProductsFilter_prodFilterSearchField__-eWaH",ne="ProductsFilter_prodSearchCancelBtn__KvECn",oe="ProductsFilter_prodSearchIcon__DgQpn",ae="ProductsFilter_prodSearchSubmitBtn__BZNft ProductsFilter_prodSearchCancelBtn__KvECn",de="ProductsFilter_prodFilterSelectsWrapper__qm2KI",ie="ProductsFilter_prodFilterCategorySlct__35BA-",le="ProductsFilter_prodFilterRecSlct__2o6pX ProductsFilter_prodFilterCategorySlct__35BA-",ue=c(5705),me=function(){var e=(0,a.I0)(),r=(0,i.lr)(),c=(0,o.Z)(r,2),t=c[0],l=c[1],m=f(),_=m.category,x=m.filters,h=(0,d.useMemo)((function(){return Object.fromEntries((0,n.Z)(t))}),[t]),p=""!==x.search||""!==x.category||""!==x.recommended,g=0===Object.keys(h).length,v=(0,ue.TA)({initialValues:{search:h.search||x.search,category:h.category||x.category,recommended:h.recommended||x.recommended},onSubmit:function(e){return j(e)}});(0,d.useEffect)((function(){g&&p&&l({search:x.search,category:x.category,recommended:x.recommended}),e((0,u.w)())}),[e,p,g,x.search,x.category,x.recommended,l]);var j=function(r){e((0,J.U7)()),e((0,J.rr)((0,s.Z)({page:1},r)))},N=function(e){v.handleChange(e);var r=v.initialValues,c=v.values;if(e.target.value!==r[e.target.value]){var t=(0,s.Z)((0,s.Z)({},c),{},(0,ee.Z)({},e.target.name,e.target.value));j(t),l(t)}};return(0,M.jsx)(M.Fragment,{children:(0,M.jsxs)("form",{className:ce,onSubmit:v.handleSubmit,children:[(0,M.jsxs)("div",{className:te,children:[(0,M.jsx)("input",{className:se,type:"search",name:"search",placeholder:"Search",value:v.values.search,onChange:v.handleChange}),v.initialValues.search!==v.values.search&&(0,M.jsx)("button",{className:ne,type:"button",onClick:function(){v.setFieldValue("search",""),v.handleSubmit()},children:(0,M.jsx)("svg",{className:oe,children:(0,M.jsx)("use",{href:"".concat(re.Z,"#Close")})})}),(0,M.jsx)("button",{className:ae,type:"submit",children:(0,M.jsx)("svg",{className:oe,children:(0,M.jsx)("use",{href:"".concat(re.Z,"#Search")})})})]}),(0,M.jsxs)("div",{className:de,children:[(0,M.jsxs)("select",{className:ie,name:"category",value:v.values.category,onChange:N,children:[(0,M.jsx)("option",{value:"",children:"Categories"}),_.map((function(e){return(0,M.jsx)("option",{value:e,children:e},e)}))]}),(0,M.jsxs)("select",{className:le,name:"recommended",value:v.values.recommended,onChange:N,children:[(0,M.jsx)("option",{value:"",children:"All"}),(0,M.jsx)("option",{value:!0,children:"Recommended"}),(0,M.jsx)("option",{value:!1,children:"Not recommended"})]})]})]})})},_e=c(7689),xe=function(){var e=(0,N.Z)().user;return e&&null!==e.profileSettings?(0,M.jsxs)(M.Fragment,{children:[(0,M.jsxs)("div",{className:U.Z.containerProducts,children:[(0,M.jsx)(t.Z,{title:"Products"}),(0,M.jsx)(me,{})]}),(0,M.jsx)($,{})]}):(0,M.jsx)(_e.Fg,{to:V._2})}},3027:function(e,r,c){c.d(r,{$x:function(){return n},KR:function(){return s},P3:function(){return t},QN:function(){return o}});var t=function(e){return e.diary.diaryProducts},s=function(e){return e.diary.diaryExercises},n=function(e){return e.diary.isLoading},o=function(e){return e.diary.error}},0:function(e,r){r.Z=function(e){var r=String(e.getDate()).padStart(2,"0"),c=String(e.getMonth()+1).padStart(2,"0"),t=e.getFullYear();return"".concat(t,"-").concat(c,"-").concat(r)}},1220:function(e,r){r.Z={exerciseWrapper:"ExercisesItem_exerciseWrapper__RIxrk",exerciseCardTopPart:"ExercisesItem_exerciseCardTopPart__Pqhh+",exerciseCardTopDiet:"ExercisesItem_exerciseCardTopDiet__NE2S6",exerciseArrow:"ExercisesItem_exerciseArrow__qG4Qc",exerciseName:"ExercisesItem_exerciseName__ZDurI",exerciseManSvg:"ExercisesItem_exerciseManSvg__6FfGy",exerciseArrowSvg:"ExercisesItem_exerciseArrowSvg__PllwK",exerciseNameText:"ExercisesItem_exerciseNameText__lZpBN",exerciseCardLowPart:"ExercisesItem_exerciseCardLowPart__Pd5F8",exerciseCardItem:"ExercisesItem_exerciseCardItem__hHkND",productRecommendedTrue:"ExercisesItem_productRecommendedTrue__ImE7z",productRecommendedFalse:"ExercisesItem_productRecommendedFalse__ZZ2Vd",productsCardTopPart:"ExercisesItem_productsCardTopPart__oPg19",productRecommended:"ExercisesItem_productRecommended__NqFXH",productCategory:"ExercisesItem_productCategory__w+tQU"}},9971:function(e,r){r.Z={exerciseArrowSvg:"ExercisesList_exerciseArrowSvg__eumz-",exerciseArrow:"ExercisesList_exerciseArrow__IEsFr",exercisesTitle:"ExercisesList_exercisesTitle__6FPY+",cardContainer:"ExercisesList_cardContainer__MW6u4",cardContainerBackground:"ExercisesList_cardContainerBackground__xLfR5",containerProducts:"ExercisesList_containerProducts__PcZc6"}}}]);
//# sourceMappingURL=11.d4791690.chunk.js.map