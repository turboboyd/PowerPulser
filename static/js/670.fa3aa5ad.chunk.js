"use strict";(self.webpackChunkpowerpulse=self.webpackChunkpowerpulse||[]).push([[670],{1023:function(e,r,t){t.d(r,{Z:function(){return _}});var c="BasicModalWindow_backdrop__zF1Qa",s="BasicModalWindow_modalWrapper__z8HT4",n=t(4164),o=t(2791),a="CloseButton_button__1uWD8",i="CloseButton_iconClose__6Mb78",d=t(182),u=t(3329),l=function(e){var r=e.handleCloseModal;return(0,u.jsx)("button",{className:a,type:"button",onClick:r,children:(0,u.jsx)(d.Z,{className:i,iconId:"Close"})})},m=document.querySelector("#modal-root"),_=function(e){var r=e.children,t=e.handleModalToggle;(0,o.useEffect)((function(){var e=function(e){"Escape"===e.code&&t()};return window.addEventListener("keydown",e),function(){window.removeEventListener("keydown",e)}}),[t]);return(0,n.createPortal)((0,u.jsx)("div",{className:c,onClick:function(e){e.currentTarget===e.target&&t()},children:(0,u.jsxs)("div",{className:s,children:[(0,u.jsx)(l,{handleCloseModal:t}),r]})}),m)}},4112:function(e,r,t){t.d(r,{Z:function(){return o}});var c="TitlePage_title__zyjBQ",s=t(930),n=t(3329);function o(e){var r=e.title;return(0,n.jsx)("div",{children:(0,n.jsx)(s.E.div,{initial:{opacity:0},animate:{opacity:1},transition:{duration:.5},children:(0,n.jsx)("h1",{className:c,children:r})})})}},1301:function(e,r,t){var c=t(9434),s=t(3027);r.Z=function(){return{diaryProducts:(0,c.v9)(s.P3),diaryExercises:(0,c.v9)(s.KR),diaryIsLoading:(0,c.v9)(s.$x),diaryError:(0,c.v9)(s.QN)}}},4388:function(e,r,t){t.r(r),t.d(r,{default:function(){return je}});var c=t(4112),s=t(1413),n=t(3433),o=t(9439),a=t(9434),i=t(2791),d=t(1087),u=t(5294),l=t(1617),m=function(e){return e.products.items},_=function(e){return e.products.category},x=function(e){return e.products.filters},p=function(e){return e.products.isLoading},h=function(e){return e.products.error},f=function(e){return e.products.getMore},g=function(){var e=(0,a.v9)(m),r=(0,a.v9)(_);return{products:e,filters:(0,a.v9)(x),productsIsLoading:(0,a.v9)(p),productsError:(0,a.v9)(h),productsGetMore:(0,a.v9)(f),category:r}},v=t(182),j=t(1220),N=t(7834),y=t(1023),P=t(5705),C=t(1301),Z="AddProductForm_container__YBAvA",S="AddProductForm_inputContainer__1uqyJ",F="AddProductForm_inputProduct__K1YMm",b="AddProductForm_inputGrams__kcPoQ",w="AddProductForm_text__QjxaI",A="AddProductForm_textCalories__60oO9",E="AddProductForm_buttonWrapper__xC1d5",I="AddProductForm_button__Alzd8",k="AddProductForm_button2__Ipdcp",T=t(0),M=t(7120),R=t(5031),L=t(9577),B=t(3329),W=function(e){var r=e.product,t=e.handleModalProduct,c=e.handleModalSuccess,s=e.handleSelectedProduct,n=(0,a.I0)(),o=(0,C.Z)().diaryError,i=function(e){return Math.round(e*r.calories/100)},d=(0,T.Z)(new Date);return(0,B.jsx)("div",{className:Z,children:(0,B.jsx)(P.J9,{initialValues:{amount:""},validationSchema:R.Z,onSubmit:function(e){var a={date:d,product:r._id,amount:e.amount,calories:i(e.amount)};n((0,M.Re)(a)),o?console.log("Server error. Try again later"):(t(),c(),s(a))},children:function(e){return(0,B.jsxs)(P.l0,{children:[(0,B.jsxs)("div",{className:S,children:[(0,B.jsx)("label",{htmlFor:"title",children:(0,B.jsx)(P.gN,{className:F,id:"title",type:"text",name:"title",value:(0,L.Z)(r.title),disabled:!0})}),(0,B.jsx)(P.gN,{className:b,id:"grams",type:"text",name:"amount",placeholder:"grams",autoFocus:!0})]}),(0,B.jsxs)("p",{className:w,children:["Calories:"," ",(0,B.jsx)("span",{className:A,children:(0,B.jsx)(P.gN,{name:"amount",children:function(e){var r=e.field;return i(r.value)}})})]}),(0,B.jsxs)("div",{className:E,children:[(0,B.jsx)("button",{className:I,type:"submit",disabled:!e.isValid,children:"Add to diary"}),(0,B.jsx)("button",{className:k,type:"button",onClick:t,children:"Cancel"})]})]})}})})},Q="AddProductSuccess_container__AkagA",D="AddProductSuccess_image__ohi8Y",O="AddProductSuccess_title__omYwl",q="AddProductSuccess_text__UEw+f",K="AddProductSuccess_textCalories__41fIg",V="AddProductSuccess_button__GQJKQ",z="AddProductSuccess_linkWrapper__DJv+W",Y="AddProductSuccess_link__O+rV3",G="AddProductSuccess_iconArrow__WMwhk",H=t.p+"static/media/foodIcon.2edbd1522a105924ee3e.png",U=t(2041),J=function(e){var r=e.handleModalSuccess,t=e.selectedProduct;return(0,B.jsxs)("div",{className:Q,children:[(0,B.jsx)("img",{className:D,src:H,alt:"Avocado icon"}),(0,B.jsx)("strong",{className:O,children:"Well done"}),(0,B.jsxs)("p",{className:q,children:["Calories:"," ",(0,B.jsx)("span",{className:K,children:t.calories})]}),(0,B.jsx)("button",{className:V,type:"button",onClick:r,children:"Next product"}),(0,B.jsxs)("div",{className:z,children:[(0,B.jsx)(d.OL,{to:U.zw,className:Y,onClick:r,children:"To the diary"}),(0,B.jsx)(v.Z,{className:G,iconId:"Arrow"})]})]})},X=(0,i.forwardRef)((function(e,r){var t=e.product,c=(0,N.Z)().user.profileSettings.blood,s=(0,i.useState)(!1),n=(0,o.Z)(s,2),a=n[0],d=n[1],u=(0,i.useState)(!1),l=(0,o.Z)(u,2),m=l[0],_=l[1],x=(0,i.useState)(""),p=(0,o.Z)(x,2),h=p[0],f=p[1],g=function(){d((function(e){return!e})),document.body.classList.toggle("body-scroll-lock")},P=function(){_((function(e){return!e})),document.body.classList.toggle("body-scroll-lock")};return(0,B.jsxs)("div",{className:j.Z.exerciseWrapper,ref:r,children:[(0,B.jsxs)("div",{className:j.Z.productsCardTopPart,children:[(0,B.jsx)("p",{className:j.Z.exerciseCardTopDiet,children:"diet"}),t.groupBloodNotAllowed[c]?(0,B.jsxs)("div",{className:j.Z.productRecommended,children:[(0,B.jsx)("p",{className:j.Z.productRecommendedTrue}),(0,B.jsx)("p",{children:"Recommended"})]}):(0,B.jsxs)("div",{className:j.Z.productRecommended,children:[(0,B.jsx)("p",{className:j.Z.productRecommendedFalse}),(0,B.jsx)("p",{children:"Not recommended"})]}),(0,B.jsxs)("button",{className:j.Z.exerciseArrow,onClick:g,children:["Add",(0,B.jsx)(v.Z,{className:j.Z.exerciseArrowSvg,iconId:"Arrow"})]}),a&&(0,B.jsx)(y.Z,{handleModalToggle:g,children:(0,B.jsx)(W,{handleModalSuccess:P,handleModalProduct:g,product:t,handleSelectedProduct:function(e){f(e)}})}),m&&(0,B.jsx)(y.Z,{handleModalToggle:P,children:(0,B.jsx)(J,{handleModalSuccess:P,selectedProduct:h})})]}),(0,B.jsxs)("div",{className:j.Z.exerciseName,children:[(0,B.jsx)(v.Z,{className:j.Z.exerciseManSvg,iconId:"Runner"}),(0,B.jsx)("h3",{className:j.Z.exerciseNameText,children:t.title})]}),(0,B.jsxs)("ul",{className:j.Z.exerciseCardLowPart,children:[(0,B.jsxs)("li",{children:["Calories:",(0,B.jsx)("span",{children:t.calories})]}),(0,B.jsxs)("li",{className:j.Z.productCategory,children:["Category:",(0,B.jsx)("span",{className:j.Z.exerciseCardItem,children:t.category})]}),(0,B.jsxs)("li",{children:["Weight:",(0,B.jsx)("span",{className:j.Z.exerciseCardItem,children:t.weight})]})]})]})})),$=t(9971),ee=t(4152),re=t(2232),te="ProductsNotFound_wrapper__eX7vO",ce="ProductsNotFound_text__80dpI",se="ProductsNotFound_warningText__Hksy6",ne=function(){return(0,B.jsx)(B.Fragment,{children:(0,B.jsxs)("div",{className:te,children:[(0,B.jsxs)("p",{className:ce,children:[(0,B.jsx)("span",{className:se,children:"Sorry, no results were found "}),"for the product filters you selected. You may want to consider other search options to find the product you want. Our range is wide and you have the opportunity to find more options that suit your needs."]}),(0,B.jsx)("p",{className:ce,children:(0,B.jsx)("span",{className:se,children:"Try changing the search parameters."})})]})})},oe=function(){var e=(0,a.I0)(),r=(0,d.lr)(),t=(0,o.Z)(r,1)[0],c=g(),m=c.products,_=c.filters,x=c.productsIsLoading,p=c.productsGetMore,h=(0,i.useRef)(),f=(0,i.useMemo)((function(){return Object.fromEntries((0,n.Z)(t))}),[t]),v=Object.keys(f).length>0&&(f.search!==_.search||f.category!==_.category||f.recommended!==_.recommended),j=(0,i.useCallback)((function(r){x||(h.current&&h.current.disconnect(),h.current=new IntersectionObserver((function(r){if(r[0].isIntersecting&&p){var t=_.page+1;e((0,ee.rr)({page:t}))}})),r&&h.current.observe(r))}),[x,p,e,_.page]);return(0,i.useEffect)((function(){var r=u.Z.CancelToken.source(),t=r.token,c=_;return v&&e((0,ee.rr)((0,s.Z)({},f))),e((0,l.t)({filterParams:c,cancelToken:t})),function(){return r.cancel()}}),[e,_,f,v]),(0,i.useEffect)((function(){return function(){e((0,ee.U7)()),e((0,ee.rr)({page:1}))}}),[e]),(0,B.jsxs)(B.Fragment,{children:[x&&1===_.page&&(0,B.jsx)(re.Z,{}),0===m.length&&!x&&(0,B.jsx)(ne,{}),(0,B.jsx)("div",{className:$.Z.cardContainer,children:m.map((function(e,r){return m.length===r+1?(0,B.jsx)(X,{ref:j,product:e},e._id):(0,B.jsx)(X,{product:e},e._id)}))})]})},ae=t(4942),ie=t(9334),de="ProductsFilter_prodFilterForm__RotTv",ue="ProductsFilter_prodFilterSearchBox__lproc",le="ProductsFilter_prodFilterSearchField__-eWaH",me="ProductsFilter_prodSearchCancelBtn__KvECn",_e="ProductsFilter_prodSearchIcon__DgQpn",xe="ProductsFilter_prodSearchSubmitBtn__BZNft ProductsFilter_prodSearchCancelBtn__KvECn",pe="ProductsFilter_prodFilterSelectsWrapper__qm2KI",he="ProductsFilter_prodFilterCategorySlct__35BA-",fe="ProductsFilter_prodFilterRecSlct__2o6pX ProductsFilter_prodFilterCategorySlct__35BA-",ge=function(){var e=(0,a.I0)(),r=(0,d.lr)(),t=(0,o.Z)(r,2),c=t[0],u=t[1],m=g(),_=m.category,x=m.filters,p=(0,i.useMemo)((function(){return Object.fromEntries((0,n.Z)(c))}),[c]),h=""!==x.search||""!==x.category||""!==x.recommended,f=0===Object.keys(p).length,v=(0,P.TA)({initialValues:{search:p.search||x.search,category:p.category||x.category,recommended:p.recommended||x.recommended},onSubmit:function(e){return j(e)}});(0,i.useEffect)((function(){f&&h&&u({search:x.search,category:x.category,recommended:x.recommended}),e((0,l.w)())}),[e,h,f,x.search,x.category,x.recommended,u]);var j=function(r){u(r),e((0,ee.U7)()),e((0,ee.rr)((0,s.Z)({page:1},r)))},N=function(e){v.handleChange(e);var r=v.initialValues,t=v.values;if(e.target.value!==r[e.target.value]){var c=(0,s.Z)((0,s.Z)({},t),{},(0,ae.Z)({},e.target.name,e.target.value));j(c)}};return(0,B.jsx)(B.Fragment,{children:(0,B.jsxs)("form",{className:de,onSubmit:v.handleSubmit,children:[(0,B.jsxs)("div",{className:ue,children:[(0,B.jsx)("input",{className:le,type:"text",name:"search",placeholder:"Search",value:v.values.search,onChange:v.handleChange}),v.initialValues.search!==v.values.search&&(0,B.jsx)("button",{className:me,type:"button",onClick:function(){v.setFieldValue("search",""),v.handleSubmit()},children:(0,B.jsx)("svg",{className:_e,children:(0,B.jsx)("use",{href:"".concat(ie.Z,"#Close")})})}),(0,B.jsx)("button",{className:xe,type:"submit",children:(0,B.jsx)("svg",{className:_e,children:(0,B.jsx)("use",{href:"".concat(ie.Z,"#Search")})})})]}),(0,B.jsxs)("div",{className:pe,children:[(0,B.jsxs)("select",{className:he,name:"category",value:v.values.category,onChange:N,children:[(0,B.jsx)("option",{value:"",children:"Categories"}),_.map((function(e){return(0,B.jsx)("option",{value:e,children:e},e)}))]}),(0,B.jsxs)("select",{className:fe,name:"recommended",value:v.values.recommended,onChange:N,children:[(0,B.jsx)("option",{value:"",children:"All"}),(0,B.jsx)("option",{value:!0,children:"Recommended"}),(0,B.jsx)("option",{value:!1,children:"Not recommended"})]})]})]})})},ve=t(7689),je=function(){var e=(0,N.Z)().user;return e&&null!==e.profileSettings?(0,B.jsxs)(B.Fragment,{children:[(0,B.jsxs)("div",{className:$.Z.containerProducts,style:{marginTop:0},children:[(0,B.jsx)(c.Z,{title:"Products"}),(0,B.jsx)(ge,{})]}),(0,B.jsx)(oe,{})]}):(0,B.jsx)(ve.Fg,{to:U._2})}},3027:function(e,r,t){t.d(r,{$x:function(){return n},KR:function(){return s},P3:function(){return c},QN:function(){return o}});var c=function(e){return e.diary.diaryProducts},s=function(e){return e.diary.diaryExercises},n=function(e){return e.diary.isLoading},o=function(e){return e.diary.error}},9577:function(e,r){r.Z=function(e){return e.substring(0,1).toUpperCase()+e.substring(1)}},0:function(e,r){r.Z=function(e){var r=String(e.getDate()).padStart(2,"0"),t=String(e.getMonth()+1).padStart(2,"0"),c=e.getFullYear();return"".concat(c,"-").concat(t,"-").concat(r)}},5031:function(e,r,t){var c=t(8007),s=c.Ry().shape({amount:c.Rx().positive("Amount must be a positive number").required("Amount is required")});r.Z=s},1220:function(e,r){r.Z={exerciseWrapper:"ExercisesItem_exerciseWrapper__RIxrk",exerciseCardTopPart:"ExercisesItem_exerciseCardTopPart__Pqhh+",exerciseCardTopDiet:"ExercisesItem_exerciseCardTopDiet__NE2S6",exerciseArrow:"ExercisesItem_exerciseArrow__qG4Qc",exerciseName:"ExercisesItem_exerciseName__ZDurI",exerciseManSvg:"ExercisesItem_exerciseManSvg__6FfGy",exerciseArrowSvg:"ExercisesItem_exerciseArrowSvg__PllwK",exerciseNameText:"ExercisesItem_exerciseNameText__lZpBN",exerciseCardLowPart:"ExercisesItem_exerciseCardLowPart__Pd5F8",exerciseCardItem:"ExercisesItem_exerciseCardItem__hHkND",productRecommendedTrue:"ExercisesItem_productRecommendedTrue__ImE7z",productRecommendedFalse:"ExercisesItem_productRecommendedFalse__ZZ2Vd",productsCardTopPart:"ExercisesItem_productsCardTopPart__oPg19",productRecommended:"ExercisesItem_productRecommended__NqFXH",productCategory:"ExercisesItem_productCategory__w+tQU"}},9971:function(e,r){r.Z={exerciseArrowSvg:"ExercisesList_exerciseArrowSvg__eumz-",exerciseArrow:"ExercisesList_exerciseArrow__IEsFr",exercisesTitle:"ExercisesList_exercisesTitle__6FPY+",cardContainer:"ExercisesList_cardContainer__MW6u4",cardContainerBackground:"ExercisesList_cardContainerBackground__xLfR5",containerProducts:"ExercisesList_containerProducts__PcZc6"}}}]);
//# sourceMappingURL=670.fa3aa5ad.chunk.js.map